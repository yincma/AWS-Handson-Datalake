# AWS ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ç·åˆå®Ÿè·µãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€AWSã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’åŸºç›¤ã¨ã—ãŸç¾ä»£çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¼ãƒ­ã‹ã‚‰æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®å®Œå…¨ãªAWSãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯æ•™è‚²å®Ÿé¨“ã§ã™ã€‚å¤šå±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆï¼ˆRaw â†’ Clean â†’ Analyticsï¼‰ã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã€ã‚¬ãƒãƒŠãƒ³ã‚¹ã€å¤‰æ›ã€åˆ†æã®å®Œå…¨ãªãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯è¨­å®šé§†å‹•æ–¹å¼ã‚’æ¡ç”¨ã—ã€å®Œå…¨ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã€å­¦ç¿’è€…ãŒä¼æ¥­ãƒ¬ãƒ™ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’è¿…é€Ÿã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ç†è§£ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

## æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ã‚¹ã‚¿ãƒƒã‚¯
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å±¤**: Amazon S3 (éšå±¤ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ + ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†)
- **ãƒ‡ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹**: AWS Lake Formation (æ¨©é™åˆ¶å¾¡ + ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†)
- **ETLã‚¨ãƒ³ã‚¸ãƒ³**: AWS Glue (Crawler + DataBrew + ETL Jobs)
- **è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³**: Amazon EMR (Sparkåˆ†æ•£è¨ˆç®—)
- **åˆ†æã‚¨ãƒ³ã‚¸ãƒ³**: Amazon Athena (ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ SQL ã‚¯ã‚¨ãƒª)

### ä¸‰å±¤ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TB
    %% Data Sources
    subgraph DataSources[" "]
        SD["ğŸ“„ Sample Data<br/>â€¢ customers.csv<br/>â€¢ orders.csv<br/>â€¢ order_items.csv<br/>â€¢ products.csv"]
    end

    %% Data Lake Storage Layers
    subgraph DataLake["Amazon S3 Data Lake"]
        direction TB
        Raw["ğŸ—ƒï¸ Raw Layer<br/>dl-handson-raw-dev<br/><i>Bronze Tier</i>"]
        Clean["âœ¨ Clean Layer<br/>dl-handson-clean-dev<br/><i>Silver Tier</i>"]
        Analytics["ğŸ“Š Analytics Layer<br/>dl-handson-analytics-dev<br/><i>Gold Tier</i>"]
        
        Raw --> Clean
        Clean --> Analytics
    end

    %% Processing & ETL Services
    subgraph AWSGlue["AWS Glue"]
        Crawler1["ğŸ” Glue Crawler<br/><i>Raw Data Discovery</i>"]
        DataBrew["ğŸ§ª Glue DataBrew<br/><i>Visual Data Preparation</i>"]
        Catalog["ğŸ“š Glue Data Catalog<br/><i>Metadata Repository</i>"]
    end

    subgraph EMR["Amazon EMR"]
        EMRCluster["âš¡ EMR Cluster<br/><i>PySpark Analytics<br/>m5.xlarge Ã— 3</i>"]
    end

    %% Analytics & Query Services
    subgraph QueryServices["Query & Analytics"]
        Athena["ğŸ” Amazon Athena<br/><i>Serverless SQL</i>"]
        AthenaResults["ğŸ“‹ Query Results<br/>dl-handson-athena-results"]
        QuickSight["ğŸ“ˆ Amazon QuickSight<br/><i>Business Intelligence</i><br/>(Optional)"]
    end

    %% Security & Governance
    subgraph Security["Security & Governance"]
        LakeFormation["ğŸ›¡ï¸ AWS Lake Formation<br/><i>Data Lake Security</i>"]
        IAM["ğŸ‘¥ AWS IAM<br/><i>Role-based Access</i><br/>â€¢ Data Engineer<br/>â€¢ Analyst<br/>â€¢ Lab Admin"]
    end

    %% Infrastructure as Code
    subgraph IaC["Infrastructure"]
        CloudFormation["â˜ï¸ AWS CloudFormation<br/><i>Infrastructure as Code</i><br/>â€¢ S3 Storage<br/>â€¢ IAM Policies<br/>â€¢ Lake Formation<br/>â€¢ Cost Monitoring"]
    end

    %% Data Flow Connections
    SD --> Raw
    Raw --> Crawler1
    Raw --> DataBrew
    Crawler1 --> Catalog
    DataBrew --> Clean
    Clean --> EMRCluster
    EMRCluster --> Analytics
    
    %% Query Connections
    Catalog --> Athena
    Raw -.-> Athena
    Clean --> Athena
    Analytics --> Athena
    Athena --> AthenaResults
    Athena -.-> QuickSight

    %% Governance Connections
    LakeFormation --> Catalog
    LakeFormation --> Raw
    LakeFormation --> Clean
    LakeFormation --> Analytics
    IAM --> LakeFormation
    IAM --> AWSGlue
    IAM --> EMR
    IAM --> QueryServices

    %% Infrastructure Connections
    CloudFormation -.-> DataLake
    CloudFormation -.-> Security
    CloudFormation -.-> AWSGlue
    CloudFormation -.-> EMR

    %% AWS Official Color Scheme
    classDef s3 fill:#FF9900,stroke:#232F3E,stroke-width:2px,color:#232F3E
    classDef glue fill:#FF9900,stroke:#232F3E,stroke-width:2px,color:#232F3E
    classDef emr fill:#FF9900,stroke:#232F3E,stroke-width:2px,color:#232F3E
    classDef analytics fill:#FF9900,stroke:#232F3E,stroke-width:2px,color:#232F3E
    classDef security fill:#FF9900,stroke:#232F3E,stroke-width:2px,color:#232F3E
    classDef infra fill:#232F3E,stroke:#FF9900,stroke-width:2px,color:#FF9900
    classDef data fill:#E8F4FD,stroke:#146EB4,stroke-width:2px,color:#146EB4

    %% Apply Styles
    class Raw,Clean,Analytics,AthenaResults s3
    class Crawler1,DataBrew,Catalog glue
    class EMRCluster emr
    class Athena,QuickSight analytics
    class LakeFormation,IAM security
    class CloudFormation infra
    class SD data
```

### æ¨©é™ã¨ã‚¬ãƒãƒŠãƒ³ã‚¹ãƒ¢ãƒ‡ãƒ«
- **Lake Formation**: çµ±ä¸€ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚«ã‚¿ãƒ­ã‚°ã¨ç´°ã‹ã„æ¨©é™åˆ¶å¾¡
- **IAMãƒ­ãƒ¼ãƒ«**: è·è²¬ãƒ™ãƒ¼ã‚¹ã®æ¨©é™åˆ†é›¢ï¼ˆDataEngineerã€Analystç­‰ï¼‰
- **ã‚¯ãƒ­ã‚¹ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆ**: EMRã€Glueã€Athenaã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªæ¨©é™ç¶™æ‰¿

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
Datalake/
â”œâ”€â”€ configs/                    # è¨­å®šç®¡ç†
â”‚   â”œâ”€â”€ config.env             # ãƒ¡ã‚¤ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰
â”‚   â”œâ”€â”€ config.local.env       # ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®šã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
â”‚   â””â”€â”€ env-vars.sh            # ç’°å¢ƒå¤‰æ•°ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”œâ”€â”€ scripts/                   # è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ setup-env.sh          # ç’°å¢ƒåˆæœŸåŒ–
â”‚   â”œâ”€â”€ cleanup.sh            # ãƒªã‚½ãƒ¼ã‚¹æ¸…ç†
â”‚   â”œâ”€â”€ create-emr-cluster.sh # EMRã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä½œæˆ
â”‚   â”œâ”€â”€ cost-optimization.sh  # ã‚³ã‚¹ãƒˆæœ€é©åŒ–
â”‚   â”œâ”€â”€ submit_pyspark_job.sh # Sparkã‚¸ãƒ§ãƒ–é€ä¿¡
â”‚   â”œâ”€â”€ pyspark_analytics.py  # PySparkã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â””â”€â”€ athena_queries.sql    # Athena ã‚¯ã‚¨ãƒªã‚µãƒ³ãƒ—ãƒ«
â”œâ”€â”€ templates/                 # CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ s3-storage-layer.yaml      # S3 ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å±¤
â”‚   â”œâ”€â”€ iam-roles-policies.yaml    # IAM ãƒ­ãƒ¼ãƒ«æ¨©é™
â”‚   â”œâ”€â”€ lake-formation.yaml        # Lake Formation è¨­å®š
â”‚   â””â”€â”€ cost-monitoring.yaml       # ã‚³ã‚¹ãƒˆç›£è¦–
â””â”€â”€ sample-data/               # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ
    â”œâ”€â”€ customers.csv          # é¡§å®¢ãƒ‡ãƒ¼ã‚¿
    â”œâ”€â”€ orders.csv            # æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿
    â”œâ”€â”€ order_items.csv       # æ³¨æ–‡æ˜ç´°
    â””â”€â”€ products.csv          # è£½å“ãƒ‡ãƒ¼ã‚¿
```

## ã‚³ã‚¢æ©Ÿèƒ½

### 1. è¨­å®šé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **çµ±åˆè¨­å®š**: `configs/config.env` ã§ã™ã¹ã¦ã®AWSãƒªã‚½ãƒ¼ã‚¹è¨­å®šã‚’é›†ä¸­ç®¡ç†
- **ç’°å¢ƒåˆ†é›¢**: ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®šã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ï¼ˆ`config.local.env`ï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆ
- **è‡ªå‹•åŒ–**: ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ç”Ÿæˆ
- **å‘½åè¦ç´„**: çµ±ä¸€ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹å‘½åè¦ç´„ï¼ˆ`${PROJECT_PREFIX}-${SUFFIX}`ï¼‰

### 2. Infrastructure as Code
- **CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: å®Œå…¨ãªIaCå®Ÿè£…
- **ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ**: æ©Ÿèƒ½åˆ¥ã«åˆ†é›¢ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®å¤‰æ›´ãŒè¿½è·¡å¯èƒ½
- **å†ç¾å¯èƒ½ãƒ‡ãƒ—ãƒ­ã‚¤**: è¤‡æ•°ç’°å¢ƒã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚’ã‚µãƒãƒ¼ãƒˆ

### 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ã‚¬ãƒãƒŠãƒ³ã‚¹
- **æœ€å°æ¨©é™åŸå‰‡**: ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®è©³ç´°ãªæ¨©é™åˆ¶å¾¡
- **ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–**: S3ã¨è»¢é€ãƒ—ãƒ­ã‚»ã‚¹ã®ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰æš—å·åŒ–
- **ç›£æŸ»ãƒ­ã‚°**: CloudTrailçµ±åˆã€å®Œå…¨ãªæ“ä½œç›£æŸ»
- **åˆ—ãƒ¬ãƒ™ãƒ«æ¨©é™**: Lake Formationã®ç´°ã‹ã„ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

### 4. ã‚³ã‚¹ãƒˆæœ€é©åŒ–
- **è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: å®Œå…¨ãªãƒªã‚½ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ¤œå‡ºã‚µãƒãƒ¼ãƒˆï¼‰
- **ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†**: S3ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã¨å‰Šé™¤
- **ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰è¨ˆç®—**: EMRã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰èµ·å‹•åœæ­¢ï¼ˆSpotã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚µãƒãƒ¼ãƒˆï¼‰
- **ã‚³ã‚¹ãƒˆç›£è¦–**: CloudWatchã‚³ã‚¹ãƒˆè­¦å‘Šã¨äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆ

### 5. ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ
Eã‚³ãƒãƒ¼ã‚¹ã‚·ãƒŠãƒªã‚ªã®å®Œå…¨ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æä¾›ï¼š
- **customers.csv**: é¡§å®¢åŸºæœ¬æƒ…å ±
- **products.csv**: è£½å“ã‚«ã‚¿ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿
- **orders.csv**: æ³¨æ–‡ãƒ¡ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«
- **order_items.csv**: æ³¨æ–‡è©³ç´°ãƒ†ãƒ¼ãƒ–ãƒ«

## å®Ÿé¨“æ‰‹é †

### ãƒ•ã‚§ãƒ¼ã‚º1: ç’°å¢ƒæº–å‚™
1. AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®šã¨æ¨©é™è¨­å®š
2. ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒè¨­å®šï¼ˆAWS CLIã€Pythonç­‰ï¼‰
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ãƒ•ã‚§ãƒ¼ã‚º2: ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ‡ãƒ—ãƒ­ã‚¤
1. S3ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å±¤ä½œæˆï¼ˆRaw/Clean/Analyticsä¸‰å±¤ï¼‰
2. IAMãƒ­ãƒ¼ãƒ«ã¨æ¨©é™ãƒãƒªã‚·ãƒ¼ã®ãƒ‡ãƒ—ãƒ­ã‚¤
3. Lake FormationåˆæœŸåŒ–ã¨æ¨©é™è¨­å®š

### ãƒ•ã‚§ãƒ¼ã‚º3: ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿ã¨ç™ºè¦‹
1. ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’Rawå±¤ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
2. Glue Crawlerã«ã‚ˆã‚‹è‡ªå‹•Schemaç™ºè¦‹
3. Data Catalogãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼

### ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã¨å¤‰æ›
1. Glue DataBrewãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ‡ãƒ¼ã‚¿æº–å‚™
2. ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«è¨­è¨ˆã¨å®Ÿè¡Œ
3. Cleanå±¤ãƒ‡ãƒ¼ã‚¿å“è³ªæ¤œè¨¼

### ãƒ•ã‚§ãƒ¼ã‚º5: ãƒ‡ãƒ¼ã‚¿åˆ†æã¨è¨ˆç®—
1. EMRã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼èµ·å‹•ã¨è¨­å®šï¼ˆcreate-emr-cluster.shã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ï¼‰
2. PySparkãƒãƒƒãƒãƒ‡ãƒ¼ã‚¿å‡¦ç†
3. Analyticså±¤é›†ç´„ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ

### ãƒ•ã‚§ãƒ¼ã‚º6: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–åˆ†æ
1. Athenaãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹è¨­å®š
2. SQLã‚¯ã‚¨ãƒªã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
3. ã‚¯ã‚¨ãƒªçµæœåˆ†æã¨å¯è¦–åŒ–

### ãƒ•ã‚§ãƒ¼ã‚º7: ç›£è¦–ã¨æœ€é©åŒ–
1. ã‚³ã‚¹ãƒˆç›£è¦–ã¨æœ€é©åŒ–
2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
3. ãƒªã‚½ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã¨ç’°å¢ƒå¾©æ—§

## å­¦ç¿’ç›®æ¨™

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†å¾Œã€å­¦ç¿’è€…ã¯ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š

### æŠ€è¡“ã‚¹ã‚­ãƒ«
- AWSãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ã‚µãƒ¼ãƒ“ã‚¹ã®å®Œå…¨ãªä½¿ç”¨æ–¹æ³•
- Infrastructure as Codeã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ETLãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­è¨ˆ
- åˆ†æ•£è¨ˆç®—ã¨SQLåˆ†æ
- ãƒ‡ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹ã¨æ¨©é™ç®¡ç†

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£èƒ½åŠ›
- ä¼æ¥­ãƒ¬ãƒ™ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ
- å¤šå±¤ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æˆ¦ç•¥
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- ã‚³ã‚¹ãƒˆæœ€é©åŒ–æˆ¦ç•¥

### é‹ç”¨ã‚¹ã‚­ãƒ«
- è‡ªå‹•åŒ–ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã¨é‹ç”¨
- ç›£è¦–ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã¨æœ€é©åŒ–
- ãƒªã‚½ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†

## å‰ææ¡ä»¶

### æŠ€è¡“æº–å‚™
- æœ‰åŠ¹ãªAWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆç®¡ç†è€…æ¨©é™ã‚’æŒã¤ï¼‰
- ãƒ­ãƒ¼ã‚«ãƒ«ã«AWS CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—èªè¨¼æƒ…å ±ã‚’è¨­å®š
- Python 3.7+ç’°å¢ƒ
- SQLã¨Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤èƒ½åŠ›

### çŸ¥è­˜è¦ä»¶
- AWSåŸºæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®ç†è§£ï¼ˆIAMã€VPCã€CloudWatchï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã®åŸºæœ¬æ¦‚å¿µ
- åˆ†æ•£è¨ˆç®—ã®åŸºç¤ç†è§£
- ã‚¯ãƒ©ã‚¦ãƒ‰ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨æ¨©é™ç®¡ç†ã®æ¦‚å¿µ

## äºˆæƒ³æ™‚é–“ã¨ã‚³ã‚¹ãƒˆ

### æ™‚é–“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
- **åˆè¨ˆ**: 3-4æ™‚é–“ï¼ˆçµŒé¨“ãƒ¬ãƒ™ãƒ«ã«ã‚ˆã‚‹ï¼‰
- **ç’°å¢ƒæº–å‚™**: 30åˆ†
- **ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ‡ãƒ—ãƒ­ã‚¤**: 45åˆ†
- **ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ—ãƒ­ã‚»ã‚¹**: 90åˆ†
- **åˆ†æã¨æœ€é©åŒ–**: 45åˆ†
- **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: 15åˆ†

### ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Š
ä¸»è¦èª²é‡‘ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼š
- **S3ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: $0.023/GB/æœˆï¼ˆæ¨™æº–ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰
- **EMRã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼**: $0.067/æ™‚é–“ï¼ˆm5.xlargeï¼‰
- **Glue**: $0.44/DPU/æ™‚é–“
- **Athena**: $5/TBã‚¹ã‚­ãƒ£ãƒ³ãƒ‡ãƒ¼ã‚¿
- **Lake Formation**: è¿½åŠ æ–™é‡‘ãªã—

> **ã‚³ã‚¹ãƒˆåˆ¶å¾¡ãƒ’ãƒ³ãƒˆ**: EMRã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’é©æ™‚åœæ­¢ã™ã‚‹ã“ã¨ã§å®Ÿé¨“ã‚³ã‚¹ãƒˆã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã¾ã™

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

1. AWSç’°å¢ƒã‚’è¨­å®šã—ã¾ã™ï¼š
   ```bash
   ./scripts/setup-env.sh
   ```

2. ãƒ‡ãƒ¼ã‚¿å‡¦ç†ç”¨EMRã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’ä½œæˆã—ã¾ã™ï¼š
   ```bash
   ./scripts/create-emr-cluster.sh --key-name <your-key> --subnet-id <your-subnet>
   ```

3. å®Œäº†å¾Œã«ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã™ï¼š
   ```bash
   ./scripts/cleanup.sh
   ```

## æ‹¡å¼µå­¦ç¿’

### ä¸Šç´šãƒˆãƒ”ãƒƒã‚¯
- ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼ˆLambda + Kinesisï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒ å‡¦ç†ï¼ˆKinesis Analyticsï¼‰
- æ©Ÿæ¢°å­¦ç¿’çµ±åˆï¼ˆSageMakerï¼‰
- ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ï¼ˆQuickSightï¼‰

### ä¼æ¥­ãƒ¬ãƒ™ãƒ«æ‹¡å¼µ
- ãƒãƒ«ãƒã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- ãƒ‡ãƒ¼ã‚¿ç³»è­œã¨ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆåˆ†æ
- è‡ªå‹•åŒ–ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯
- ç½å®³å¾©æ—§ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æ•™è‚²ãƒ»å­¦ç¿’ç›®çš„ã®ã¿ã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚æœ¬ç•ªç’°å¢ƒã§ã®ç›´æ¥ä½¿ç”¨ã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚å®Ÿéš›ã®ä½¿ç”¨å‰ã«ååˆ†ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è©•ä¾¡ã¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚

---

> **é‡è¦ãªæ³¨æ„**: å®Ÿé¨“å®Œäº†å¾Œã¯å¿…ãšã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã€ä¸è¦ãªAWSæ–™é‡‘ã®ç™ºç”Ÿã‚’é¿ã‘ã¦ãã ã•ã„ã€‚